<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="BSM322App.YapilacaklarPage"
             Title="Yapılacaklar">
    <Grid BackgroundColor="{AppThemeBinding Light=White, Dark=#1a1a1a}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Ekleme Butonu -->
        <Button Grid.Row="0" Text="+ Yeni Görev Ekle" BackgroundColor="#9C27B0" TextColor="White" 
                CornerRadius="10" Margin="20,10" HeightRequest="50" Clicked="OnAddTaskClicked"/>

        <!-- Görev Listesi -->
        <CollectionView Grid.Row="1" x:Name="TasksCollectionView" ItemsSource="{Binding Tasks}">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame BackgroundColor="{AppThemeBinding Light=#f8f8f8, Dark=#2a2a2a}" 
                           CornerRadius="10" Margin="15,5" Padding="15" HeightRequest="100">
                        <Grid ColumnDefinitions="Auto,*,Auto,Auto">
                            <CheckBox Grid.Column="0" IsChecked="{Binding IsCompleted}" 
                                     CheckedChanged="OnTaskCompletedChanged"/>

                            <StackLayout Grid.Column="1" Margin="10,0">
                                <Label Text="{Binding Title}" FontAttributes="Bold" FontSize="16" 
                                       TextColor="{AppThemeBinding Light=Black, Dark=White}"/>
                                <Label Text="{Binding Description}" FontSize="14" 
                                       TextColor="{AppThemeBinding Light=Gray, Dark=LightGray}"/>
                                <Label Text="{Binding DateTime, StringFormat='{0:dd/MM/yyyy HH:mm}'}" 
                                       FontSize="12" TextColor="{AppThemeBinding Light=Blue, Dark=LightBlue}"/>
                            </StackLayout>

                            <Button Grid.Column="2" Text="✏️" BackgroundColor="Transparent" 
                                   TextColor="#FF9800" FontSize="20" Clicked="OnEditTaskClicked"
                                   CommandParameter="{Binding}"/>

                            <Button Grid.Column="3" Text="🗑️" BackgroundColor="Transparent" 
                                   TextColor="#F44336" FontSize="20" Clicked="OnDeleteTaskClicked"
                                   CommandParameter="{Binding}"/>
                        </Grid>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>
    </Grid>
</ContentPage>